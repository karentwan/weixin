<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="author" content="谢家兴">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, width=device-width, user-scalable=no">
	<title>U趣机器人创客俱乐部</title>

	<link rel="stylesheet" href="../css/frozen.css">

	<style>
	body{background-color: #f2f2f2;}
	.ui-header h1{color: #00a5e0;}
	.banner{height: 200px;}
	.banner img{width: 100%;height: 220px;}
	</style>
</head>
<body>
	<header class="ui-header ui-header-stable">
		<i class="ui-icon-return"  onclick="window.location.pathname='/uqu/about.html'"></i>
		<h1>免费体验课程</h1>
	</header>

	<div class="ui-container">
		<section class="ui-center ui-border-b banner">
			<img src="../img/about2.png" alt="">
		</section>
		<div class="ui-form ui-border-t">
		    <form action="#" style="margin-top:2em;">
		        <div class="ui-form-item ui-form-item-show ui-border-b">
		            <label for="#">姓名</label>
		            <input type="text" placeholder="请输入姓名" id="name">
		        </div>
		        <div class="ui-form-item ui-form-item-show ui-border-b">
		            <label for="#">年龄</label>
		            <input type="number" placeholder="请输入年龄" id="age">
		        </div>
		        <div class="ui-form-item ui-form-item-show ui-border-b">
		            <label for="#">联系方式</label>
		            <input type="number" maxlength="11" minlength="11" placeholder="11位" id="tel">
		        </div>
		        <div class="ui-form-item ui-form-item-show ui-border-b">
		            <label for="#">预约时间</label>
		            <input type="date" id="time">
		        </div>

		        <div class="ui-btn-wrap">
		            <button class="ui-btn-lg" id="submit">
		                确定
		            </button>
		        </div>
		    </form>
		</div>
 	</div>
	<!-- /.ui-container -->
	<script src="../lib/zepto.min.js"></script>
	<script>
		$(function(){

			/******************Query Data Generation********************/
			var getSendObject = function(obj){
				var o = {};
				for (var item in obj) {
					if (obj.hasOwnProperty(item)) {
						// console.log(obj[item]);
						o[item] = $(obj[item]).val();
					}
				}
				return o;
			};
			/******************End Query Data Generation********************/



			/******************Post Request Method********************/
			var sendAppointmentRequset = function (data) {
				$.ajax({
					url: 'http://weixin2.ngrok.natapp.cn/uweixin/order',
					type: 'GET',
					data: data,
					success: function (res) {
						if (parseInt(res) < 0) {
							alert("预约失败");
							return;
						} else {
							alert("预约成功！");
						}
					},
					error: function () {
						alert("网络错误，请检查网络后重试！");
					}
				});			
			};
			/******************End Post Request Method********************/


			$("#submit").click(function(e){
				e.preventDefault();
				var data = getSendObject({
								name: "#name",
								age: "#age",
								tel: "#tel",
								time: "#time"
							});
				sendAppointmentRequset(data);
			});
		});
	</script>
</body>
</html>